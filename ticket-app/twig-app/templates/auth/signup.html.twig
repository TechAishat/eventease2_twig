{% extends 'base.html.twig' %}

{% block title %}Sign Up - TicketMaster{% endblock %}

{% block styles %}
<style>
    .signup-container {
        min-height: calc(100vh - 200px);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem 0;
    }
    
    .signup-card {
        width: 100%;
        max-width: 28rem;
        background: white;
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        padding: 2.5rem;
    }
    
    .form-group {
        margin-bottom: 1rem;
    }
    
    .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: #374151;
    }
    
    .form-input {
        width: 100%;
        padding: 0.5rem 0.75rem;
        border: 1px solid #d1d5db;
        border-radius: 0.375rem;
        font-size: 1rem;
        line-height: 1.5;
    }
    
    .form-input:focus {
        outline: none;
        border-color: #6366f1;
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }
    
    .btn-primary {
        display: block;
        width: 100%;
        padding: 0.75rem 1.5rem;
        background-color: #4f46e5;
        color: white;
        font-weight: 500;
        text-align: center;
        border-radius: 0.375rem;
        transition: background-color 0.2s;
    }
    
    .btn-primary:hover {
        background-color: #4338ca;
    }
    
    .login-link {
        display: block;
        margin-top: 1.5rem;
        text-align: center;
        font-size: 0.875rem;
        color: #6b7280;
    }
    
    .login-link a {
        color: #4f46e5;
        font-weight: 500;
    }
    
    .login-link a:hover {
        text-decoration: underline;
    }
    
    .error-message {
        margin-top: 0.5rem;
        font-size: 0.875rem;
        color: #ef4444;
    }
</style>
{% endblock %}

{% block content %}
<div class="signup-container">
    <div class="signup-card">
        <div class="text-center mb-8">
            <h1 class="text-2xl font-bold text-gray-900">Create your account</h1>
            <p class="mt-2 text-sm text-gray-600">Already have an account? <a href="/ticket-app/twig-app/public/login" class="font-medium text-indigo-600 hover:text-indigo-500">Sign in</a></p>
        </div>
        
        <form id="signupForm" action="/ticket-app/twig-app/public/register" method="POST">
            <div class="form-group">
                <label for="name" class="form-label">Full Name</label>
                <input type="text" id="name" name="name" required 
                       class="form-input" 
                       placeholder="John Doe">
                <div id="nameError" class="error-message"></div>
            </div>
            
            <div class="form-group">
                <label for="email" class="form-label">Email address</label>
                <input type="email" id="email" name="email" required 
                       class="form-input" 
                       placeholder="you@example.com">
                <div id="emailError" class="error-message"></div>
            </div>
            
            <div class="form-group">
                <label for="password" class="form-label">Password</label>
                <input type="password" id="password" name="password" required 
                       class="form-input" 
                       placeholder="••••••••"
                       minlength="8">
                <div id="passwordError" class="error-message"></div>
            </div>
            
            <div class="form-group">
                <label for="password_confirmation" class="form-label">Confirm Password</label>
                <input type="password" id="password_confirmation" name="password_confirmation" required 
                       class="form-input" 
                       placeholder="••••••••"
                       minlength="8">
                <div id="passwordConfirmError" class="error-message"></div>
            </div>
            
            <div class="mt-6">
                <button type="submit" class="btn-primary">
                    Create Account
                </button>
            </div>
        </form>
        
        <div class="mt-6">
            <div class="relative">
                <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-gray-300"></div>
                </div>
                <div class="relative flex justify-center text-sm">
                    <span class="px-2 bg-white text-gray-500">Or continue with</span>
                </div>
            </div>
            
            <div class="mt-6 grid grid-cols-2 gap-3">
                <a href="#" class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                    <span class="sr-only">Sign up with Google</span>
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path fill-rule="evenodd" d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10c5.51 0 10-4.48 10-10S15.51 0 10 0zm4.64 10.5c0 .43-.03.85-.11 1.25h-6.8v-2.5h6.28c.12.6.19 1.24.19 1.9 0 6.5-3.9 8.75-9.2 8.75-5.1 0-9.2-4.1-9.2-9.2 0-5.1 4.1-9.2 9.2-9.2 2.6 0 4.8.9 6.5 2.5l-2.3 2.3c-.7-.7-1.6-1-2.5-1-2.2 0-4 1.8-4 4s1.8 4 4 4c2.5 0 3.7-1.8 3.9-2.7H10v-1.8h5.64z" clip-rule="evenodd" />
                    </svg>
                </a>
                <a href="#" class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                    <span class="sr-only">Sign up with GitHub</span>
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path fill-rule="evenodd" d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0110 4.844c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.7 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.933.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C17.14 18.157 20 14.413 20 10.017 20 4.484 15.522 0 10 0z" clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.getElementById('signupForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Reset error messages
        document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
        
        // Get form values
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        const passwordConfirm = document.getElementById('password_confirmation').value;
        
        let isValid = true;
        
        // Validate name
        if (name.length < 2) {
            document.getElementById('nameError').textContent = 'Name must be at least 2 characters long';
            isValid = false;
        }
        
        // Validate email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            document.getElementById('emailError').textContent = 'Please enter a valid email address';
            isValid = false;
        }
        
        // Validate password
        if (password.length < 8) {
            document.getElementById('passwordError').textContent = 'Password must be at least 8 characters long';
            isValid = false;
        }
        
        // Validate password confirmation
        if (password !== passwordConfirm) {
            document.getElementById('passwordConfirmError').textContent = 'Passwords do not match';
            isValid = false;
        }
        
        // If form is valid, submit it
        if (isValid) {
            // In a real app, you would send this to your server
            console.log('Form is valid, submitting...');
            // For now, we'll just show a success message
            showToast('Account created successfully! Redirecting to login...');
            
            // Redirect to login after a short delay
            setTimeout(() => {
                window.location.href = '/ticket-app/twig-app/public/login';
            }, 2000);
        } else {
            showToast('Please fix the errors in the form');
        }
    });
    
    function showToast(message) {
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        
        toastMessage.textContent = message;
        toast.classList.remove('hidden');
        
        setTimeout(() => {
            toast.classList.add('hidden');
        }, 5000);
    }
</script>
{% endblock %}
